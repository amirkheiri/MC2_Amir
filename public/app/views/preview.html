<!DOCTYPE html>
<html>
<head>
<title>Dynamic Preview of Textarea with MathJax Content</title>
<!-- Copyright (c) 2012-2017 The MathJax Consortium -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/javascript" src="/app/js/mathjax_preview.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    showProcessingMessages: false,
    tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] },
    SVG: {
      scale: 150
    }
  });
  MathJax.Hub.setRenderer("SVG");
</script>

  <style>
    body{
      font-size: 3;
      background-color:white;
    }
    h2{
      font-size: 3;
      font-family: 'Lucida Sans';
      color: grey;
      
    }
    
    textarea{
    background-color: lightgrey;
    font-family: Lucida Sans;
    font-size: 4;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    width: 100%;
    height: 100%;
    }

  </style>
</head>
<body>
<div style="display: flex; width: 100%; overflow: hidden;">
  <div style="width:50%; float: left;">
    <textarea id="mathjax_viewer" cols="40" rows="10" onchange="Preview.CreatePreview()" onkeyup="Preview.CreatePreview()" style="margin-top:5px"></textarea>
  </div>

  <div id="MathPreview" style=" border:1px solid; padding: 3px; width:50%; margin:5px"></div>
  <div id="MathBuffer" style="border:1px solid; padding: 3px; width:50%; margin:5px; 
  visibility:hidden; position:absolute; top:0; left: 0"></div>
</div>

<div>
    <button id="preview-send">send</button>
</div>



</body>
<script>
  setTimeout(function () {
        Preview.Init();
    }, 2000);

    document.getElementById("preview-send").onclick = function() {
        if(document.getElementById('mathjax_viewer').value) {
            parent.document.getElementById('textArea').value = document.getElementById('mathjax_viewer').value;
            parent.document.getElementById('chat-send-button').click();
        } else {
            alert("nothing to send");
        }
    }

</script>
</html>